### 🐸 Metaplex について

[ Metaplex ](https://www.metaplex.com)は NFT の作成とミント、オークション、Web アプリケーションにウォレット連携を実装するためのフレームワークを提供する、Solana を利用したプロトコルを指します。

Metaplex を使用することで、Solana 上で簡単に NFT を発行できます。

Ethereum と比較してみましょう!

Ethereum では、NFT を作成するために、以下を実行します。

1\. 独自のカスタム OpenZeppelin ERC-721 NFT コントラクトを作成する

2\. コントラクトをイーサリアムネットワーク上にデプロイする

3\. NFT をミントしたい場合は、カスタムコントラクトでミント関数を呼び出す

一方 Metaplex は、コントラクトを作成する必要はありません。NFT コレクションを構築できる独自の標準 NFT コントラクトをすでに持っています。

自分でコントラクトを書くこともできますが、Solana が並列処理を用いているため、難易度は高く非常に複雑です。

※「5 人が同時に NFT を作成し、残りが 2 人だけの場合、誰がそれを取得するのか」などのケースを考慮する必要があります。

イーサリアムでは、これは簡単です。すべて同期的で直列的ですので、上記の問題を検討する必要はありません。

ですが、Solana のセールスポイントもまた並列処理を実行できることです。これにより処理は高速になります。**しかし、並列処理のためにコードは複雑になります。**

Metaplex のようなツールは非常に便利です。彼らは私たちのエッジケースを処理し、私たちがインタラクティブなスマートコントラクトを提供します。

### 🍭 Candy Machine について

本プロジェクト全体を通して、「Candy Machine」を中心に説明します。
Candy Machine は、Metaplex CLI を利用して NFT を生成し、画像と関連するメタデータを NFT トークンにリンクし、「フェアなオークション」を設定するツールです。

Candy Machine の非常に優れている特徴の 1 つとして、販売する NFT がなくなるとユーザーの資金を受け取らないことが挙げられます。

大したことないと思うかもしれませんが、並列処理を採用する Solana でこれを実現することは難しいです。たとえば、次の例を見てみましょう。

1\. 1 つの NFT が残っています。

2\. 人物 A と人物 B が同時にミントをクリックします。

3\. 並行して、スマートコントラクトは、個人 A と個人 B が NFT の支払いに必要な資金を持っているかどうかをチェックします。またミントできる NFT が残っているかどうかもチェックします。

4\. プログラムは、NFT の支払いのために、個人 A のアカウントと個人 B のアカウントから資金を引き出します。

5\. プログラムは、たまたま最初に並行して処理された人物 B の NFT を作成します。人物 A は、「NFT はもうありません」のようなエラーを受け取ります。

6\. A さんは NFT を受け取ることができず、お金も失いました。B さんは幸せです。

これは、並列コンピューティングにおける、典型的な課題です。解決策としては [ミューテックス](https://doc.rust-lang.org/std/sync/struct.Mutex.html) と [アトミックトランザクション](<https://en.wikipedia.org/wiki/Atomicity_(database_systems)>) の使用が挙げられます。

これらは実装がかなり複雑です。

**Metaplex の Candy Machine は私たちのためにこのようなものを実装しています。**

Candy Machine にはほかにもいくつかの機能がありますが、これについては後で説明します。

### 🙋‍♂️ 質問する

ここまでの作業で何かわからないことがある場合は、Discord の `#solana-nft-drop` で質問をしてください。

---

次のレッスンに進んで、環境構築を行いましょう 🎉
